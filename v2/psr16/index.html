<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Caching implementation with a variety of storage options, as well as codified caching strategies for callbacks, classes, and output."> 

    
    
        
    
    <meta name="docsearch:version" content="4.0.0,latest">
    <meta name="docsearch:language" content="en">
    <meta name="docsearch:component" content="laminas-cache">

    <link rel="canonical" href="https://docs.laminas.dev/laminas-cache/v2/psr16/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>PSR-16 - laminas-cache - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="components" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown sub-project-selector">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a href="https://docs.mezzio.dev/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mezzio-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Mezzio</strong><br>
                                        PSR-15 Middleware in Minutes
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/components/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-components-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Components</strong><br>
                                        Components for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/mvc" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mvc-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>MVC</strong><br>
                                        MVC for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/migration/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Migration to Laminas
                                    </div>
                                </div>
                            </a>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/tutorials/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Tutorials
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">laminas-cache</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                
            

                
                

                    
                    
                
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../installation/" class="subnavigation__link">Installation</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Storage</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../storage/adapter/" class="subnavigation__link">Adapters</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../storage/capabilities/" class="subnavigation__link">Capabilities</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../storage/plugin/" class="subnavigation__link">Plugins</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Cache Patterns</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/intro/" class="subnavigation__link">Introduction</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/callback-cache/" class="subnavigation__link">CallbackCache</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/object-cache/" class="subnavigation__link">ObjectCache</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/output-cache/" class="subnavigation__link">OutputCache</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/capture-cache/" class="subnavigation__link">CaptureCache</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Standards Support</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../psr6/" class="subnavigation__link">PSR-6</a>
    </li>

            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">PSR-16</a>
    </li>

            
        </ul>
    </li>

                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-cache</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-right">
                
                    
<div class="version-selector">
    <div class="btn-group">
        <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" data-display="static" aria-haspopup="true" aria-expanded="false" id="version-selector-dropdown">
            
                v2
            
        </button>
        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" aria-labelledby="version-selector-dropdown">
            
                
                    <a href="../../v4/installation/" class="dropdown-item">
                        
                            v4 (latest)
                        
                    </a>
                
            
                
                    <a href="../../v3/installation/" class="dropdown-item">
                        
                            v3
                        
                    </a>
                
            
                
                    <a href="../installation/" class="dropdown-item active">
                        
                            v2
                        
                    </a>
                
            
        </div>
    </div>
</div>


                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-cache" class="header__link header__link--github" title="Go to repository of laminas-cache">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#serialization" class="toc__link nav-link">Serialization</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#deleting-items-and-exceptions" class="toc__link nav-link">Deleting Items and Exceptions</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="../..">laminas-cache</a></li>

                
                    
                        
                        
                    
                
                    
                        
                        
                            <li class="breadcrumb-item">Standards Support</li>
                        
                    
                

                <li class="breadcrumb-item active" aria-current="page">PSR-16</li>
            
        
    </ol>
</nav>



    <div class="alert alert-danger" role="alert">
        <h4>Caution</h4>
        <p>
            The documentation you are viewing is for an older version of this component.<br>
            <a href="../..">Switch to the latest (v4) version.</a>
        </p>
    </div>




    
    
        <h2 class="chapter__headline">Standards Support</h2>
    

    <h1 id="psr-16">PSR-16</h1>
<blockquote>
<p>Available since version 2.8.0</p>
</blockquote>
<p><a href="https://www.php-fig.org/psr/psr-16/">PSR-16</a> provides a simplified approach to
cache access that does not involve cache pools, tags, deferment, etc.; it
can be thought of as a key/value storage approach to caching.</p>
<p>laminas-cache provides PSR-16 support via the class
<code>Laminas\Cache\Psr\SimpleCache\SimpleCacheDecorator</code>. This class implements PSR-16's
<code>Psr\SimpleCache\CacheInterface</code>, and composes a
<code>Laminas\Cache\Storage\StorageInterface</code> instance to which it proxies all
operations.</p>
<p>Instantiation is as follows:</p>
<pre class="highlight"><code class="language-php">use Laminas\Cache\Psr\SimpleCache\SimpleCacheDecorator;
use Laminas\Cache\Service\StorageAdapterFactoryInterface;
use Psr\Container\ContainerInterface;

/** @var ContainerInterface $container */
$container = null; // can be any configured PSR-11 container

$storageFactory = $container-&gt;get(StorageAdapterFactoryInterface::class);
$storage = $storageFactory-&gt;create('apc');

$cache = new SimpleCacheDecorator($storage);</code></pre>
<p>Once you have a <code>SimpleCacheDecorator</code> instance, you can perform operations per
that specification:</p>
<pre class="highlight"><code class="language-php">// Use has() to determine whether to fetch the value or calculate it:
$value = $cache-&gt;has('someKey') ? $cache-&gt;get('someKey') : calculateValue();
if (! $cache-&gt;has('someKey')) {
    $cache-&gt;set('someKey', $value);
}

// Or use a default value:
$value = $cache-&gt;get('someKey', $defaultValue);</code></pre>
<p>When setting values, whether single values or multiple, you can also optionally
provide a Time To Live (TTL) value. This proxies to the underlying storage
instance's options, temporarily resetting its TTL value for the duration of the
operation. TTL values may be expressed as integers (in which case they represent
seconds) or <code>DateInterval</code> instances. As examples:</p>
<pre class="highlight"><code class="language-php">$cache-&gt;set('someKey', $value, 30); // set TTL to 30s
$cache-&gt;set('someKey', $value, new DateInterval('P1D')); // set TTL to 1 day

$cache-&gt;setMultiple([
    'key1' =&gt; $value1,
    'key2' =&gt; $value2,
], 3600); // set TTL to 1 hour
$cache-&gt;setMultiple([
    'key1' =&gt; $value1,
    'key2' =&gt; $value2,
], new DateInterval('P6H')); // set TTL to 6 hours</code></pre>
<p>For more details on what methods are exposed, consult the <a href="https://www.php-fig.org/psr/psr-16/#21-cacheinterface">CacheInterface
specification</a>.</p>
<h2 id="serialization">Serialization</h2>
<p>PSR-16 has strict requirements around serialization of values. This is done to
ensure that if you swap one PSR-16 adapter for another, the new one will be able
to return the same values that the original adapter saved to the cache.</p>
<p>Not all cache backends support the same data types, however. laminas-cache provides
a plugin, <code>Laminas\Cache\Storage\Plugin\Serializer</code>, that you can attach to
adapters in order to ensure data is serialized to a string when saving to the
cache, and deserialized to native PHP types on retrieval. The following adapters
require this plugin in order to work with the <code>SimpleCacheDecorator</code>:</p>
<ul>
<li>Dba</li>
<li>Filesystem</li>
<li>Memcache</li>
<li>MongoDB</li>
<li>Redis</li>
<li>XCache</li>
</ul>
<p>We provide a number of examples of <a href="../storage/plugin/">attaching plugins to storage adapters in the
plugins chapter</a>. Generally, it will be one of:</p>
<pre class="highlight"><code class="language-php">use Laminas\Cache\Service\StorageAdapterFactoryInterface;
use Laminas\Cache\Storage\Plugin\Serializer;
use Psr\Container\ContainerInterface;

// Manual attachment after you have an instance:
$cache-&gt;addPlugin(new Serializer());

// Via configuration:
/** @var ContainerInterface $container */
$container = null; // can be any configured PSR-11 container

$storageFactory = $container-&gt;get(StorageAdapterFactoryInterface::class);
$cache = $storageFactory-&gt;create(
    'filesystem', 
    [], 
    [
        ['name' =&gt; 'serializer'],
    ]
);</code></pre>
<h2 id="deleting-items-and-exceptions">Deleting Items and Exceptions</h2>
<p>PSR-16 states that the <code>delete()</code> and <code>deleteMultiple()</code> methods should return
<code>false</code> if an <em>error</em> occured when deleting the key(s) provided, but <code>true</code>
otherwise.</p>
<p>Generally, laminas-cache storage adapters comply with this. However, it is possible
to configure your adapter such that you may get a false positive result from
these methods.</p>
<p>When an exception is raised and caught during key removal by an adapter, the adapter triggers an event with a <code>Laminas\Cache\Storage\ExceptionEvent</code>. Plugins can react to these, and even manipulate the event instance. One such plugin, <code>Laminas\Cache\Storage\Plugin\ExceptionHandler</code>, has a configuration option, <code>throw_exceptions</code> that, when boolean <code>false</code>, will prevent raising the exception. In such cases, adapters will typically return a boolean <code>false</code> anyways, but custom, third-party adapters may not.</p>
<p>Additionally, if you add a custom plugin that listens to removal event exceptions and modifies the return value and/or disables throwing the exception, a false positive return value could occur.</p>
<p>As such, we recommend that if you wish to use laminas-cache to provide a PSR-16 adapter, you audit the plugins you use with your adapter to ensure that you will get consistent, correct behavior for <code>delete()</code> and <code>deleteMultiple()</code> operations.</p>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../psr6/">
                    <small class="page-nav__label">Previous</small>
                    <i class="fa fa-chevron-left"></i>
                    PSR-6
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>



                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                <div class="donation-banner">
    <a href="https://getlaminas.org/support/">
        <h2>Donate</h2>
        <p>Support Laminas Developers Directly</p>
        <img src="https://funding.communitybridge.org/assets/cb-f-horizontal-white.svg">
    </a>
</div>

                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">laminas-cache</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                
            

                
                

                    
                    
                
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../installation/" class="subnavigation__link">Installation</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Storage</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../storage/adapter/" class="subnavigation__link">Adapters</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../storage/capabilities/" class="subnavigation__link">Capabilities</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../storage/plugin/" class="subnavigation__link">Plugins</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Cache Patterns</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/intro/" class="subnavigation__link">Introduction</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/callback-cache/" class="subnavigation__link">CallbackCache</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/object-cache/" class="subnavigation__link">ObjectCache</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/output-cache/" class="subnavigation__link">OutputCache</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../pattern/capture-cache/" class="subnavigation__link">CaptureCache</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Standards Support</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../psr6/" class="subnavigation__link">PSR-6</a>
    </li>

            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">PSR-16</a>
    </li>

            
        </ul>
    </li>

                    
                
            
        </ul>
    </div>

                    
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Maintenance Overview <a href="https://getlaminas.org/packages-maintenance-status/">Current maintenance status of Laminas &amp; Mezzio packages</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fab fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fab fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://phpc.social/@getlaminas" class="support__link" title="Mastodon"><i class="fab fa-mastodon"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-cache/blob/-/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-cache/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2024 <a href="https://getlaminas.org/">Laminas Project</a> a Series of LF Projects, LLC.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '../..',
            project  = "components",
            siteName = 'laminas-cache';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-cache" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
